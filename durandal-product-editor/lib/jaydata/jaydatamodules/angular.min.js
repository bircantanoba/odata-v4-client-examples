// JayData 1.5.1 CTP
// Dual licensed under MIT and GPL v2
// Copyright JayStack Technologies (http://jaydata.org/licensing)
//
// JayData is a standards-based, cross-platform Javascript library and a set of
// practices to access and manipulate data from various online and offline sources.
//
// Credits:
//     Hajnalka Battancs, Dániel József, János Roden, László Horváth, Péter Nochta
//     Péter Zentai, Róbert Bónay, Szabolcs Czinege, Viktor Borza, Viktor Lázár,
//     Zoltán Gyebrovszki, Gábor Dolla
//
// More info: http://jaydata.org
!function(){var e;(e="function"!=typeof define||"function"==typeof define&&!define.amd?function(e,t){t()}:define)(["jaydata"],function(){!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.$data=e()}}(function(){return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("jaydata/core"),a=o(i),u="undefined"!=typeof window?window.jQuery:"undefined"!=typeof r?r.jQuery:null,f=o(u),s="undefined"!=typeof window?window.angular:"undefined"!=typeof r?r.angular:null,c=o(s);!function(){Object.defineProperty(a["default"].Entity.prototype,"_isNew",{get:function(){return!this.storeToken}}),Object.defineProperty(a["default"].Entity.prototype,"_isDirty",{get:function(){return!this._isNew&&this.changedProperties&&this.changedProperties.length>0}});var e=a["default"].Entity.prototype.save,t=a["default"].Entity.prototype.remove,n=a["default"].EntityContext.prototype.saveChanges,r=function(e){var t,n,r=e.expression.getJSON(),o=0;if(0==r.length)return o;for(t=0;t<r.length;t++)n=r.charCodeAt(t),o=(o<<5)-o+n,o&=o;return o};c["default"].module("jaydata",["ng",["$provide",function(o){o.factory("$data",["$rootScope","$q",function(o,i){var u={};return a["default"].Entity.prototype.hasOwnProperty=function(e){var t;return this.getType&&this.getType().memberDefinitions?(t=this.getType().memberDefinitions["$"+e])?"property"===t.kind&&t.enumerable:!1:Object.prototype.hasOwnProperty.apply(this,arguments)},a["default"].Queryable.prototype.toLiveArrayEx=function(e,t){function n(e){i.toArray().then(function(n){t.length=0,n.forEach(function(e){t.push(e)}),e.resolve(t)}).fail(e.reject).then(function(){a.$apply()})}function r(){var e=f["default"].Deferred(n);return e.promise(t),t}Array.isArray(e)&&(t=e,e=void 0),t=t||[],e=e||{};var i=this,a=e.scope||o;return t.refresh=r,r()},a["default"].Queryable.prototype.toLiveArray=function(e){function t(e,t){if(e){var n="success"===t?a.successHandlers:a.errorHandlers;return"completed"===a.state?e(a):n.push(e),a}}var n=this,i=(this.toTraceString(),r(this));if(u[i])return u[i];var a=[];return u[i]=a,a.state="inprogress",a.successHandlers=[],a.errorHandlers=[],e&&"function"==typeof e&&t(e,"success"),a.then=a.success=function(e){return t(e,"success")},a.error=function(e){return a},a.refresh=function(e){return a.length=0,a.state="inprogress",t(e,"success"),n.toArray({success:a.resolve,error:a.reject}),a},a.resolve=function(e){a.state="completed",e.forEach(function(e){a.push(e)}),a.successHandlers.forEach(function(e){e(a)}),o.$$phase||o.$apply()},a.reject=function(e){a.state="failed",a.errorHandlers.forEach(function(t){t(e)}),o.$$phase||o.$apply()},this.toArray({success:a.resolve,error:a.reject}),a},a["default"].Entity.prototype.save=function(){var t=this,n=i.defer();return e.call(t).then(function(){u={},n.resolve(t),o.$$phase||o.$apply()}).fail(function(e){n.reject(e),o.$$phase||o.$apply()}),n.promise},a["default"].ItemStoreClass.prototype.EntityInstanceSave=function(e,t){var r=a["default"].ItemStore,o=this;return r._getStoreEntitySet(e,o).then(function(i){return r._getSaveMode(o,i,t,e).then(function(e){switch(e=e||"add"){case"add":i.add(o);break;case"attach":i.attach(o,!0),o.entityState=a["default"].EntityState.Modified;break;default:var t=new a["default"].PromiseHandler,u=t.createCallback();return u.error("save mode not supported: "+e),t.getPromise()}return n.call(i.entityContext).then(function(){return r._setStoreAlias(o,i.entityContext.storeToken),o})})})},a["default"].ItemStoreClass.prototype.EntityInstanceRemove=function(e){var t=a["default"].ItemStore,r=this;return t._getStoreEntitySet(e,r).then(function(e){return e.remove(r),n.call(e.entityContext).then(function(){return r})})},a["default"].ItemStoreClass.prototype.EntityTypeRemoveAll=function(e){return function(t){var r=a["default"].ItemStore;return r._getStoreEntitySet(t,e).then(function(e){return e.toArray().then(function(t){return t.forEach(function(t){e.remove(t)}),n.call(e.entityContext).then(function(){return t})})})}},a["default"].ItemStoreClass.prototype.EntityTypeAddMany=function(e){return function(t,r){var o=a["default"].ItemStore;return o._getStoreEntitySet(r,e).then(function(e){var r=e.addMany(t);return n.call(e.entityContext).then(function(){return r})})}},a["default"].Entity.prototype.remove=function(){var e=i.defer(),n=this;return t.call(n).then(function(){u={},e.resolve(n),o.$$phase||o.$apply()}).fail(function(t){e.reject(t),o.$$phase||o.$apply()}),e.promise},a["default"].EntityContext.prototype.saveChanges=function(){var e=this,t=i.defer();return n.call(e).then(function(e){u={},t.resolve(e),o.$$phase||o.$apply()}).fail(function(e){t.reject(e),o.$$phase||o.$apply()}),t.promise},a["default"]}])}]])}(),n["default"]=a["default"],t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"jaydata/core":"jaydata/core"}]},{},[1])(1)})})}();
//# sourceMappingURL=angular.min.js.map
